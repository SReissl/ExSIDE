nB=12
Time=1632
mc=1
load("Rundata/datamc1.Rdata")
weekdata<-Modelreturns$weekoutput
bankdataw<-Modelreturns$banksavw
monthdata<-Modelreturns$monthoutput
quarterdata<-Modelreturns$quarteroutput
yeardata<-Modelreturns$yearoutput
bankdatam<-Modelreturns$banksavm
bankdataq<-Modelreturns$banksavq
bankdataa<-Modelreturns$banksava
banksw<-Modelreturns$banksw
bNames<-Modelreturns$bNames
rm(Modelreturns)

if(mc>1){
for(i in 2:mc){
  filename<-paste("Rundata/datamc",i,".Rdata",sep='')
  load(filename)
  weekdata<-weekdata+Modelreturns$weekoutput
  monthdata<-monthdata+Modelreturns$monthoutput
  quarterdata<-quarterdata+Modelreturns$quarteroutput
  yeardata<-yeardata+Modelreturns$yearoutput
  bankdataw<-bankdataw+Modelreturns$banksavw
  bankdatam<-bankdatam+Modelreturns$banksavm
  bankdataq<-bankdataq+Modelreturns$banksavq
  bankdataa<-bankdataa+Modelreturns$banksava
  banksw<-banksw+Modelreturns$banksw
  rm(Modelreturns)
}

weekdata<-weekdata/mc
monthdata<-monthdata/mc
quarterdata<-quarterdata/mc
yeardata<-yeardata/mc
bankdataw<-bankdataw/mc
bankdatam<-bankdatam/mc
bankdataq<-bankdataq/mc
bankdataa<-bankdataa/mc
banksw<-banksw/mc
}


wbnames<-paste("bank",1:nB,"w",sep="")
mbnames<-paste("bank",1:nB,"m",sep="")
qbnames<-paste("bank",1:nB,"q",sep="")
abnames<-paste("bank",1:nB,"a",sep="")
  for(b in 1:nB){
    dframe<-as.data.frame(banksw[,,b])
    for(l in 1:ncol(dframe)){
    if(is.na(dframe[1,l])==TRUE){
      dframe[1,l]<-dframe[2,l]
    }
  }
    dframem<-as.data.frame(array(data = NA, dim=c((Time+48)/4,length(bNames)),dimnames = list(NULL,bNames)))
    dframeq<-as.data.frame(array(data = NA, dim=c((Time+48)/12,length(bNames)),dimnames = list(NULL,bNames)))
    dframea<-as.data.frame(array(data = NA, dim=c((Time+48)/48,length(bNames)),dimnames = list(NULL,bNames)))
    month=0
    for(j in 1:nrow(dframe)){
    if(j/4==round(j/4)){
    month=month+1
  dframem$sav_b[(j-3*month)]<-sum(dframe$sav_b[(j-3):j])
  dframem$pr_b[(j-3*month)]<-sum(dframe$pr_b[(j-3):j])
  dframem$v_b[(j-3*month)]<-mean(dframe$v_b[(j-3):j])
  dframem$v_bb[(j-3*month)]<-mean(dframe$v_bb[(j-3):j])
  dframem$v_bbe[(j-3*month)]<-mean(dframe$v_bbe[(j-3):j])
  dframem$v_bbt[(j-3*month)]<-mean(dframe$v_bbt[(j-3):j])
  dframem$a_b[(j-3*month)]<-mean(dframe$a_b[(j-3):j])
  dframem$r_b[(j-3*month)]<-mean(dframe$r_b[(j-3):j])
  dframem$iM_b[(j-3*month)]<-sum(dframe$iM_b[(j-3):j])
  dframem$iLL_b[(j-3*month)]<-sum(dframe$iLL_b[(j-3):j])
  dframem$iD_hb[(j-3*month)]<-sum(dframe$iD_hb[(j-3):j])
  dframem$iD_fb[(j-3*month)]<-sum(dframe$iD_fb[(j-3):j])
  dframem$iIB_b[(j-3*month)]<-sum(dframe$iIB_b[(j-3):j])
  dframem$M_supb[(j-3*month)]<-sum(dframe$M_supb[(j-3):j])
  dframem$rep_mb[(j-3*month)]<-sum(dframe$rep_mb[(j-3):j])
  dframem$M_npb[(j-3*month)]<-sum(dframe$M_npb[(j-3):j])
  dframem$LL_supb[(j-3*month)]<-sum(dframe$LL_supb[(j-3):j])
  dframem$rep_LLb[(j-3*month)]<-sum(dframe$rep_LLb[(j-3):j])
  dframem$LL_npb[(j-3*month)]<-sum(dframe$LL_npb[(j-3):j])
  dframem$M_b[(j-3*month)]<-mean(dframe$M_b[(j-3):j])
  dframem$LL_b[(j-3*month)]<-mean(dframe$LL_b[(j-3):j])
  dframem$clear_b[(j-3*month)]<-sum(dframe$clear_b[(j-3):j])
  dframem$clearalt_b[(j-3*month)]<-sum(dframe$clearalt_b[(j-3):j])
  dframem$R_pb[(j-3*month)]<-mean(dframe$R_pb[(j-3):j])
  dframem$R_paltb[(j-3*month)]<-mean(dframe$R_paltb[(j-3):j])
  dframem$R_tb[(j-3*month)]<-mean(dframe$R_tb[(j-3):j])
  dframem$R_anb[(j-3*month)]<-mean(dframe$R_anb[(j-3):j])
  dframem$IBL_sb[(j-3*month)]<-mean(dframe$IBL_sb[(j-3):j])
  dframem$IBA_db[(j-3*month)]<-mean(dframe$IBA_db[(j-3):j])
  dframem$IBA_b[(j-3*month)]<-mean(dframe$IBA_b[(j-3):j])
  dframem$IBL_b[(j-3*month)]<-mean(dframe$IBL_b[(j-3):j])
  dframem$R_lb[(j-3*month)]<-mean(dframe$R_lb[(j-3):j])
  dframem$div_b[(j-3*month)]<-sum(dframe$div_b[(j-3):j])
  dframem$div_bt[(j-3*month)]<-sum(dframe$div_bt[(j-3):j])
  dframem$bb_b[(j-3*month)]<-mean(dframe$bb_b[(j-3):j])
  dframem$r_LLb[(j-3*month)]<-mean(dframe$r_LLb[(j-3):j])
  dframem$r_Mb[(j-3*month)]<-mean(dframe$r_Mb[(j-3):j])
  dframem$r_db[(j-3*month)]<-mean(dframe$r_db[(j-3):j])
  dframem$CARb[(j-3*month)]<-mean(dframe$CARb[(j-3):j])
  dframem$LCRb[(j-3*month)]<-mean(dframe$LCRb[(j-3):j])
  dframem$ir_b[(j-3*month)]<-sum(dframe$ir_b[(j-3):j])
  dframem$ia_b[(j-3*month)]<-sum(dframe$ia_b[(j-3):j])
  dframem$bal_bb[(j-3*month)]<-sum(dframe$bal_bb[(j-3):j])
  dframem$D_hb[(j-3*month)]<-mean(dframe$D_hb[(j-3):j])
  dframem$D_fb[(j-3*month)]<-mean(dframe$D_fb[(j-3):j])
  dframem$carshare[(j-3*month)]<-mean(dframe$carshare[(j-3):j])
  dframem$rdshare[(j-3*month)]<-mean(dframe$rdshare[(j-3):j])
  dframem$rllshare[(j-3*month)]<-mean(dframe$rllshare[(j-3):j])
  dframem$rmshare[(j-3*month)]<-mean(dframe$rmshare[(j-3):j])
  dframem$IBSshare[(j-3*month)]<-mean(dframe$IBSshare[(j-3):j])
  dframem$IBDshare[(j-3*month)]<-mean(dframe$IBDshare[(j-3):j])
  dframem$rationM[(j-3*month)]<-mean(dframe$rationM[(j-3):j])
  dframem$rationLL[(j-3*month)]<-mean(dframe$rationLL[(j-3):j])
  dframem$M_db[(j-3*month)]<-sum(dframe$M_db[(j-3):j])
  dframem$LL_db[(j-3*month)]<-sum(dframe$LL_db[(j-3):j])
  dframem$bust[(j-3*month)]<-sum(dframe$bust[(j-3):j])
  dframem$rLLrel[(j-3*month)]<-mean(dframe$rLLrel[(j-3):j])
  dframem$rMrel[(j-3*month)]<-mean(dframe$rMrel[(j-3):j])
  dframem$rDrel[(j-3*month)]<-mean(dframe$rDrel[(j-3):j])
  dframem$Mlag[(j-3*month)]<-mean(dframe$Mlag[(j-3):j])
  dframem$LLlag[(j-3*month)]<-mean(dframe$LLlag[(j-3):j])
  dframem$Dhlag[(j-3*month)]<-mean(dframe$Dhlag[(j-3):j])
  dframem$Dflag[(j-3*month)]<-mean(dframe$Dflag[(j-3):j])
  dframem$default_LL[(j-3*month)]<-mean(dframe$default_LL[(j-3):j])
  dframem$default_M[(j-3*month)]<-mean(dframe$default_M[(j-3):j])
  dframem$clear[(j-3*month)]<-sum(dframe$clear[(j-3):j])
  dframem$RWA_gap[(j-3*month)]<-mean(dframe$RWA_gap[(j-3):j])
  dframem$markup_LL[(j-3*month)]<-mean(dframe$markup_LL[(j-3):j])
  dframem$markup_M[(j-3*month)]<-mean(dframe$markup_M[(j-3):j])
  dframem$defrateLL[(j-3*month)]<-mean(dframe$defrateLL[(j-3):j])
  dframem$defrateM[(j-3*month)]<-mean(dframe$defrateM[(j-3):j])
  dframem$detshareDh[(j-3*month)]<-mean(dframe$detshareDh[(j-3):j])
  dframem$detshareDf[(j-3*month)]<-mean(dframe$detshareDf[(j-3):j])
  dframem$detshareLL[(j-3*month)]<-mean(dframe$detshareLL[(j-3):j])
  dframem$detshareM[(j-3*month)]<-mean(dframe$detshareM[(j-3):j])
  dframem$randshareDh[(j-3*month)]<-mean(dframe$randshareDh[(j-3):j])
  dframem$randshareDf[(j-3*month)]<-mean(dframe$randshareDf[(j-3):j])
  dframem$randshareLL[(j-3*month)]<-mean(dframe$randshareLL[(j-3):j])
  dframem$randshareM[(j-3*month)]<-mean(dframe$randshareM[(j-3):j])
  dframem$defrandh[(j-3*month)]<-mean(dframe$defrandh[(j-3):j])
  dframem$defrandf[(j-3*month)]<-mean(dframe$defrandf[(j-3):j])
  dframem$v_bbe1[(j-3*month)]<-mean(dframe$v_bbe1[(j-3):j])
  dframem$v_bbe2[(j-3*month)]<-mean(dframe$v_bbe2[(j-3):j])
  dframem$v_bbe3[(j-3*month)]<-mean(dframe$v_bbe3[(j-3):j])
  dframem$v_bbe4[(j-3*month)]<-mean(dframe$v_bbe4[(j-3):j])
  dframem$fitvbb1[(j-3*month)]<-mean(dframe$fitvbb1[(j-3):j])
  dframem$fitvbb2[(j-3*month)]<-mean(dframe$fitvbb2[(j-3):j])
  dframem$fitvbb3[(j-3*month)]<-mean(dframe$fitvbb3[(j-3):j])
  dframem$fitvbb4[(j-3*month)]<-mean(dframe$fitvbb4[(j-3):j])
  dframem$maxfitvbb[(j-3*month)]<-mean(dframe$maxfitvbb[(j-3):j])
    }}
 quarter=0
    for(j in 1:nrow(dframe)){
    if(j/12==round(j/12)){
    quarter=quarter+1
  dframeq$sav_b[(j-11*quarter)]<-sum(dframe$sav_b[(j-11):j])
  dframeq$pr_b[(j-11*quarter)]<-sum(dframe$pr_b[(j-11):j])
  dframeq$v_b[(j-11*quarter)]<-mean(dframe$v_b[(j-11):j])
  dframeq$v_bb[(j-11*quarter)]<-mean(dframe$v_bb[(j-11):j])
  dframeq$v_bbe[(j-11*quarter)]<-mean(dframe$v_bbe[(j-11):j])
  dframeq$v_bbt[(j-11*quarter)]<-mean(dframe$v_bbt[(j-11):j])
  dframeq$a_b[(j-11*quarter)]<-mean(dframe$a_b[(j-11):j])
  dframeq$r_b[(j-11*quarter)]<-mean(dframe$r_b[(j-11):j])
  dframeq$iM_b[(j-11*quarter)]<-sum(dframe$iM_b[(j-11):j])
  dframeq$iLL_b[(j-11*quarter)]<-sum(dframe$iLL_b[(j-11):j])
  dframeq$iD_hb[(j-11*quarter)]<-sum(dframe$iD_hb[(j-11):j])
  dframeq$iD_fb[(j-11*quarter)]<-sum(dframe$iD_fb[(j-11):j])
  dframeq$iIB_b[(j-11*quarter)]<-sum(dframe$iIB_b[(j-11):j])
  dframeq$M_supb[(j-11*quarter)]<-sum(dframe$M_supb[(j-11):j])
  dframeq$rep_mb[(j-11*quarter)]<-sum(dframe$rep_mb[(j-11):j])
  dframeq$M_npb[(j-11*quarter)]<-sum(dframe$M_npb[(j-11):j])
  dframeq$LL_supb[(j-11*quarter)]<-sum(dframe$LL_supb[(j-11):j])
  dframeq$rep_LLb[(j-11*quarter)]<-sum(dframe$rep_LLb[(j-11):j])
  dframeq$LL_npb[(j-11*quarter)]<-sum(dframe$LL_npb[(j-11):j])
  dframeq$M_b[(j-11*quarter)]<-mean(dframe$M_b[(j-11):j])
  dframeq$LL_b[(j-11*quarter)]<-mean(dframe$LL_b[(j-11):j])
  dframeq$clear_b[(j-11*quarter)]<-sum(dframe$clear_b[(j-11):j])
  dframeq$clearalt_b[(j-11*quarter)]<-sum(dframe$clearalt_b[(j-11):j])
  dframeq$R_pb[(j-11*quarter)]<-mean(dframe$R_pb[(j-11):j])
  dframeq$R_paltb[(j-11*quarter)]<-mean(dframe$R_paltb[(j-11):j])
  dframeq$R_tb[(j-11*quarter)]<-mean(dframe$R_tb[(j-11):j])
  dframeq$R_anb[(j-11*quarter)]<-mean(dframe$R_anb[(j-11):j])
  dframeq$IBL_sb[(j-11*quarter)]<-mean(dframe$IBL_sb[(j-11):j])
  dframeq$IBA_db[(j-11*quarter)]<-mean(dframe$IBA_db[(j-11):j])
  dframeq$IBA_b[(j-11*quarter)]<-mean(dframe$IBA_b[(j-11):j])
  dframeq$IBL_b[(j-11*quarter)]<-mean(dframe$IBL_b[(j-11):j])
  dframeq$R_lb[(j-11*quarter)]<-mean(dframe$R_lb[(j-11):j])
  dframeq$div_b[(j-11*quarter)]<-sum(dframe$div_b[(j-11):j])
  dframeq$div_bt[(j-11*quarter)]<-sum(dframe$div_bt[(j-11):j])
  dframeq$bb_b[(j-11*quarter)]<-mean(dframe$bb_b[(j-11):j])
  dframeq$r_LLb[(j-11*quarter)]<-mean(dframe$r_LLb[(j-11):j])
  dframeq$r_Mb[(j-11*quarter)]<-mean(dframe$r_Mb[(j-11):j])
  dframeq$r_db[(j-11*quarter)]<-mean(dframe$r_db[(j-11):j])
  dframeq$CARb[(j-11*quarter)]<-mean(dframe$CARb[(j-11):j])
  dframeq$LCRb[(j-11*quarter)]<-mean(dframe$LCRb[(j-11):j])
  dframeq$ir_b[(j-11*quarter)]<-sum(dframe$ir_b[(j-11):j])
  dframeq$ia_b[(j-11*quarter)]<-sum(dframe$ia_b[(j-11):j])
  dframeq$bal_bb[(j-11*quarter)]<-sum(dframe$bal_bb[(j-11):j])
  dframeq$D_hb[(j-11*quarter)]<-mean(dframe$D_hb[(j-11):j])
  dframeq$D_fb[(j-11*quarter)]<-mean(dframe$D_fb[(j-11):j])
  dframeq$carshare[(j-11*quarter)]<-mean(dframe$carshare[(j-11):j])
  dframeq$rdshare[(j-11*quarter)]<-mean(dframe$rdshare[(j-11):j])
  dframeq$rllshare[(j-11*quarter)]<-mean(dframe$rllshare[(j-11):j])
  dframeq$rmshare[(j-11*quarter)]<-mean(dframe$rmshare[(j-11):j])
  dframeq$IBSshare[(j-11*quarter)]<-mean(dframe$IBSshare[(j-11):j])
  dframeq$IBDshare[(j-11*quarter)]<-mean(dframe$IBDshare[(j-11):j])
  dframeq$rationM[(j-11*quarter)]<-mean(dframe$rationM[(j-11):j])
  dframeq$rationLL[(j-11*quarter)]<-mean(dframe$rationLL[(j-11):j])
  dframeq$M_db[(j-11*quarter)]<-sum(dframe$M_db[(j-11):j])
  dframeq$LL_db[(j-11*quarter)]<-sum(dframe$LL_db[(j-11):j])
  dframeq$bust[(j-11*quarter)]<-sum(dframe$bust[(j-11):j])
  dframeq$rLLrel[(j-11*quarter)]<-mean(dframe$rLLrel[(j-11):j])
  dframeq$rMrel[(j-11*quarter)]<-mean(dframe$rMrel[(j-11):j])
  dframeq$rDrel[(j-11*quarter)]<-mean(dframe$rDrel[(j-11):j])
  dframeq$Mlag[(j-11*quarter)]<-mean(dframe$Mlag[(j-11):j])
  dframeq$LLlag[(j-11*quarter)]<-mean(dframe$LLlag[(j-11):j])
  dframeq$Dhlag[(j-11*quarter)]<-mean(dframe$Dhlag[(j-11):j])
  dframeq$Dflag[(j-11*quarter)]<-mean(dframe$Dflag[(j-11):j])
  dframeq$default_LL[(j-11*quarter)]<-mean(dframe$default_LL[(j-11):j])
  dframeq$default_M[(j-11*quarter)]<-mean(dframe$default_M[(j-11):j])
  dframeq$clear[(j-11*quarter)]<-sum(dframe$clear[(j-11):j])
  dframeq$RWA_gap[(j-11*quarter)]<-mean(dframe$RWA_gap[(j-11):j])
  dframeq$markup_LL[(j-11*quarter)]<-mean(dframe$markup_LL[(j-11):j])
  dframeq$markup_M[(j-11*quarter)]<-mean(dframe$markup_M[(j-11):j])
  dframeq$defrateLL[(j-11*quarter)]<-mean(dframe$defrateLL[(j-11):j])
  dframeq$defrateM[(j-11*quarter)]<-mean(dframe$defrateM[(j-11):j])
  dframeq$detshareDh[(j-11*quarter)]<-mean(dframe$detshareDh[(j-11):j])
  dframeq$detshareDf[(j-11*quarter)]<-mean(dframe$detshareDf[(j-11):j])
  dframeq$detshareLL[(j-11*quarter)]<-mean(dframe$detshareLL[(j-11):j])
  dframeq$detshareM[(j-11*quarter)]<-mean(dframe$detshareM[(j-11):j])
  dframeq$randshareDh[(j-11*quarter)]<-mean(dframe$randshareDh[(j-11):j])
  dframeq$randshareDf[(j-11*quarter)]<-mean(dframe$randshareDf[(j-11):j])
  dframeq$randshareLL[(j-11*quarter)]<-mean(dframe$randshareLL[(j-11):j])
  dframeq$randshareM[(j-11*quarter)]<-mean(dframe$randshareM[(j-11):j])
  dframeq$defrandh[(j-11*quarter)]<-mean(dframe$defrandh[(j-11):j])
  dframeq$defrandf[(j-11*quarter)]<-mean(dframe$defrandf[(j-11):j])
  dframeq$v_bbe1[(j-11*quarter)]<-mean(dframe$v_bbe1[(j-11):j])
  dframeq$v_bbe2[(j-11*quarter)]<-mean(dframe$v_bbe2[(j-11):j])
  dframeq$v_bbe3[(j-11*quarter)]<-mean(dframe$v_bbe3[(j-11):j])
  dframeq$v_bbe4[(j-11*quarter)]<-mean(dframe$v_bbe4[(j-11):j])
  dframeq$fitvbb1[(j-11*quarter)]<-mean(dframe$fitvbb1[(j-11):j])
  dframeq$fitvbb2[(j-11*quarter)]<-mean(dframe$fitvbb2[(j-11):j])
  dframeq$fitvbb3[(j-11*quarter)]<-mean(dframe$fitvbb3[(j-11):j])
  dframeq$fitvbb4[(j-11*quarter)]<-mean(dframe$fitvbb4[(j-11):j])
  dframeq$maxfitvbb[(j-11*quarter)]<-mean(dframe$maxfitvbb[(j-11):j])
    }}    
      year=0
    for(j in 1:nrow(dframe)){
    if(j/48==round(j/48)){
    year=year+1
  dframea$sav_b[(j-47*year)]<-sum(dframe$sav_b[(j-47):j])
  dframea$pr_b[(j-47*year)]<-sum(dframe$pr_b[(j-47):j])
  dframea$v_b[(j-47*year)]<-mean(dframe$v_b[(j-47):j])
  dframea$v_bb[(j-47*year)]<-mean(dframe$v_bb[(j-47):j])
  dframea$v_bbe[(j-47*year)]<-mean(dframe$v_bbe[(j-47):j])
  dframea$v_bbt[(j-47*year)]<-mean(dframe$v_bbt[(j-47):j])
  dframea$a_b[(j-47*year)]<-mean(dframe$a_b[(j-47):j])
  dframea$r_b[(j-47*year)]<-mean(dframe$r_b[(j-47):j])
  dframea$iM_b[(j-47*year)]<-sum(dframe$iM_b[(j-47):j])
  dframea$iLL_b[(j-47*year)]<-sum(dframe$iLL_b[(j-47):j])
  dframea$iD_hb[(j-47*year)]<-sum(dframe$iD_hb[(j-47):j])
  dframea$iD_fb[(j-47*year)]<-sum(dframe$iD_fb[(j-47):j])
  dframea$iIB_b[(j-47*year)]<-sum(dframe$iIB_b[(j-47):j])
  dframea$M_supb[(j-47*year)]<-sum(dframe$M_supb[(j-47):j])
  dframea$rep_mb[(j-47*year)]<-sum(dframe$rep_mb[(j-47):j])
  dframea$M_npb[(j-47*year)]<-sum(dframe$M_npb[(j-47):j])
  dframea$LL_supb[(j-47*year)]<-sum(dframe$LL_supb[(j-47):j])
  dframea$rep_LLb[(j-47*year)]<-sum(dframe$rep_LLb[(j-47):j])
  dframea$LL_npb[(j-47*year)]<-sum(dframe$LL_npb[(j-47):j])
  dframea$M_b[(j-47*year)]<-mean(dframe$M_b[(j-47):j])
  dframea$LL_b[(j-47*year)]<-mean(dframe$LL_b[(j-47):j])
  dframea$clear_b[(j-47*year)]<-sum(dframe$clear_b[(j-47):j])
  dframea$clearalt_b[(j-47*year)]<-sum(dframe$clearalt_b[(j-47):j])
  dframea$R_pb[(j-47*year)]<-mean(dframe$R_pb[(j-47):j])
  dframea$R_paltb[(j-47*year)]<-mean(dframe$R_paltb[(j-47):j])
  dframea$R_tb[(j-47*year)]<-mean(dframe$R_tb[(j-47):j])
  dframea$R_anb[(j-47*year)]<-mean(dframe$R_anb[(j-47):j])
  dframea$IBL_sb[(j-47*year)]<-mean(dframe$IBL_sb[(j-47):j])
  dframea$IBA_db[(j-47*year)]<-mean(dframe$IBA_db[(j-47):j])
  dframea$IBA_b[(j-47*year)]<-mean(dframe$IBA_b[(j-47):j])
  dframea$IBL_b[(j-47*year)]<-mean(dframe$IBL_b[(j-47):j])
  dframea$R_lb[(j-47*year)]<-mean(dframe$R_lb[(j-47):j])
  dframea$div_b[(j-47*year)]<-sum(dframe$div_b[(j-47):j])
  dframea$div_bt[(j-47*year)]<-sum(dframe$div_bt[(j-47):j])
  dframea$bb_b[(j-47*year)]<-mean(dframe$bb_b[(j-47):j])
  dframea$r_LLb[(j-47*year)]<-mean(dframe$r_LLb[(j-47):j])
  dframea$r_Mb[(j-47*year)]<-mean(dframe$r_Mb[(j-47):j])
  dframea$r_db[(j-47*year)]<-mean(dframe$r_db[(j-47):j])
  dframea$CARb[(j-47*year)]<-mean(dframe$CARb[(j-47):j])
  dframea$LCRb[(j-47*year)]<-mean(dframe$LCRb[(j-47):j])
  dframea$ir_b[(j-47*year)]<-sum(dframe$ir_b[(j-47):j])
  dframea$ia_b[(j-47*year)]<-sum(dframe$ia_b[(j-47):j])
  dframea$bal_bb[(j-47*year)]<-sum(dframe$bal_bb[(j-47):j])
  dframea$D_hb[(j-47*year)]<-mean(dframe$D_hb[(j-47):j])
  dframea$D_fb[(j-47*year)]<-mean(dframe$D_fb[(j-47):j])
  dframea$carshare[(j-47*year)]<-mean(dframe$carshare[(j-47):j])
  dframea$rdshare[(j-47*year)]<-mean(dframe$rdshare[(j-47):j])
  dframea$rllshare[(j-47*year)]<-mean(dframe$rllshare[(j-47):j])
  dframea$rmshare[(j-47*year)]<-mean(dframe$rmshare[(j-47):j])
  dframea$IBSshare[(j-47*year)]<-mean(dframe$IBSshare[(j-47):j])
  dframea$IBDshare[(j-47*year)]<-mean(dframe$IBDshare[(j-47):j])
  dframea$rationM[(j-47*year)]<-mean(dframe$rationM[(j-47):j])
  dframea$rationLL[(j-47*year)]<-mean(dframe$rationLL[(j-47):j])
  dframea$M_db[(j-47*year)]<-sum(dframe$M_db[(j-47):j])
  dframea$LL_db[(j-47*year)]<-sum(dframe$LL_db[(j-47):j])
  dframea$bust[(j-47*year)]<-sum(dframe$bust[(j-47):j])
  dframea$rLLrel[(j-47*year)]<-mean(dframe$rLLrel[(j-47):j])
  dframea$rMrel[(j-47*year)]<-mean(dframe$rMrel[(j-47):j])
  dframea$rDrel[(j-47*year)]<-mean(dframe$rDrel[(j-47):j])
  dframea$Mlag[(j-47*year)]<-mean(dframe$Mlag[(j-47):j])
  dframea$LLlag[(j-47*year)]<-mean(dframe$LLlag[(j-47):j])
  dframea$Dhlag[(j-47*year)]<-mean(dframe$Dhlag[(j-47):j])
  dframea$Dflag[(j-47*year)]<-mean(dframe$Dflag[(j-47):j])
  dframea$default_LL[(j-47*year)]<-mean(dframe$default_LL[(j-47):j])
  dframea$default_M[(j-47*year)]<-mean(dframe$default_M[(j-47):j])
  dframea$clear[(j-47*year)]<-sum(dframe$clear[(j-47):j])
  dframea$RWA_gap[(j-47*year)]<-mean(dframe$RWA_gap[(j-47):j])
  dframea$markup_LL[(j-47*year)]<-mean(dframe$markup_LL[(j-47):j])
  dframea$markup_M[(j-47*year)]<-mean(dframe$markup_M[(j-47):j])
  dframea$defrateLL[(j-47*year)]<-mean(dframe$defrateLL[(j-47):j])
  dframea$defrateM[(j-47*year)]<-mean(dframe$defrateM[(j-47):j])
  dframea$detshareDh[(j-47*year)]<-mean(dframe$detshareDh[(j-47):j])
  dframea$detshareDf[(j-47*year)]<-mean(dframe$detshareDf[(j-47):j])
  dframea$detshareLL[(j-47*year)]<-mean(dframe$detshareLL[(j-47):j])
  dframea$detshareM[(j-47*year)]<-mean(dframe$detshareM[(j-47):j])
  dframea$randshareDh[(j-47*year)]<-mean(dframe$randshareDh[(j-47):j])
  dframea$randshareDf[(j-47*year)]<-mean(dframe$randshareDf[(j-47):j])
  dframea$randshareLL[(j-47*year)]<-mean(dframe$randshareLL[(j-47):j])
  dframea$randshareM[(j-47*year)]<-mean(dframe$randshareM[(j-47):j])
  dframea$defrandh[(j-47*year)]<-mean(dframe$defrandh[(j-47):j])
  dframea$defrandf[(j-47*year)]<-mean(dframe$defrandf[(j-47):j])
  dframea$v_bbe1[(j-47*year)]<-mean(dframe$v_bbe1[(j-47):j])
  dframea$v_bbe2[(j-47*year)]<-mean(dframe$v_bbe2[(j-47):j])
  dframea$v_bbe3[(j-47*year)]<-mean(dframe$v_bbe3[(j-47):j])
  dframea$v_bbe4[(j-47*year)]<-mean(dframe$v_bbe4[(j-47):j])
  dframea$fitvbb1[(j-47*year)]<-mean(dframe$fitvbb1[(j-47):j])
  dframea$fitvbb2[(j-47*year)]<-mean(dframe$fitvbb2[(j-47):j])
  dframea$fitvbb3[(j-47*year)]<-mean(dframe$fitvbb3[(j-47):j])
  dframea$fitvbb4[(j-47*year)]<-mean(dframe$fitvbb4[(j-47):j])
  dframea$maxfitvbb[(j-47*year)]<-mean(dframe$maxfitvbb[(j-47):j])
  }}    
  assign(mbnames[b],dframem)
  assign(qbnames[b],dframeq)
  assign(abnames[b],dframea)
  assign(wbnames[b],dframe)
}




